<%= stylesheet_link_tag 'front'%>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<div id="loader">
  <br><br>
  <center><h3>Wait while,<br> Your online vet is checking your pet!</h3><center>
<br><br><br><br><br><br><br><br><br><br><br>
Till then increase your knowledge about your pet <br><br>
 <button id="myButton" class="button-53" role="button">Get Facts</button>
 <br>
  <b><div id="apiResponse"></div></b>
</div>

<section class="contain">
<div class="inside">
<h1><b><%= image_tag 'logo.png' ,style:"border-radius:50%;width:180px;" %>Devs 'N' Revs Care</b></h1>
</div>
</section>
<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function() {
    var loader = document.getElementById("loader");
    loader.style.display = "none";
  });
  var factsFetched = false; // Flag to track whether facts have been fetched

  function fetchDogFact() {
    $.ajax({
      url: '/fetch_dog_facts', // Route to your controller action
      method: 'GET',
      success: function (data) {
        $('#apiResponse').text('"' + data + '"'); // Update the content with the new dog fact
      },
      error: function (error) {
        console.error('Error fetching dog fact:', error);
      }
    });
  }

  // Attach a click event listener to the button
  $('#myButton').on('click', function () {
    if (!factsFetched) { // Check if facts have not been fetched yet
      fetchDogFact(); // Fetch dog fact for the first time when the button is clicked
      factsFetched = true; // Set the flag to indicate that facts have been fetched
    }
  });

  // Call fetchDogFact every 7 seconds after the first button click
  setInterval(function () {
    if (factsFetched) { // Check if facts have been fetched
      fetchDogFact();
    }
  }, 7000);
</script>
